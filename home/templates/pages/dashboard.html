{% extends 'layouts/base.html' %}
{% load static %}
{% block content %}

<main class="pt-6">
  {% include 'includes/pre-loader.html' %}

  <!-- Header -->
  <section class="section-header bg-tertiary text-black text-center py-5">
    <h1>Welcome to your Upskilling Dashboard, {{ user.first_name }}</h1>
  </section>

  <div class="container py-5">
    <!-- Summary Cards -->
    <div class="row text-light mb-4">
      <div class="col-md-4">
        <div class="card bg-success shadow-sm p-3 rounded-4 text-center">
          <h5>âœ… Completed</h5>
          <h3>{{ completed_count }}/{{ total }}</h3>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card bg-warning shadow-sm p-3 rounded-4 text-center text-dark">
          <h5>ðŸŸ¡ In Progress</h5>
          <h3>{{ in_progress_count }}/{{ total }}</h3>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card bg-secondary shadow-sm p-3 rounded-4 text-center">
          <h5>â­• Not Started</h5>
          <h3>{{ not_started_count }}/{{ total }}</h3>
        </div>
      </div>
    </div>

    <!-- Overall Progress Bar -->
    <div class="mb-5">
      <label class="text-light">Total Progress: {{ percent }}%</label>
      <div class="progress" style="height: 16px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: {{ percent }}%;" aria-valuenow="{{ percent }}" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>

    <!-- Skill Cards -->
    <div class="row">
      {% for skill in skills %}
      <div class="col-md-6 mb-4">
        <div class="card bg-dark text-white shadow-sm rounded-4">
          <div class="card-body">
            <h5 class="card-title text-warning">{{ skill.title }}</h5>
            <p>
              <strong>Status:</strong>
              {% if skill.status == "Completed" %}
                <span class="badge bg-success">Completed</span>
              {% elif skill.status == "In Progress" %}
                <span class="badge bg-warning text-dark">In Progress</span>
              {% else %}
                <span class="badge bg-secondary">Not Started</span>
              {% endif %}
            </p>
            <a href="{% url 'upskilling_skill' slug=skill.slug %}" class="btn btn-outline-light btn-sm">Open Skill</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <div style="height: 100px;"></div>
</main>

{% endblock %}
